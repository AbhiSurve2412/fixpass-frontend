<div class="study-material-container" [class.collapsed]="isCollapsed()">
  <div class="sidenav">
    <div class="collapse-button-container">
      <button mat-icon-button (click)="toggleSidenav()">
        <mat-icon>{{ isCollapsed() ? 'arrow_right' : 'arrow_left' }}</mat-icon>
      </button>
    </div>
    <ul class="subject-list">
      @for (subject of subjects(); track subject; let i = $index) {
      <li class="subject" [class.active]="selectedSubject() === subject" matTooltipClass="secondary-tooltip" (click)="selectSubject(subject)"
        [matTooltip]="subject.name" matTooltipPosition="right">
        {{ isCollapsed() ? subject.shortCode : subject.name }}
      </li>
      }
    </ul>
  </div>

  <div class="sidenav-content" [class.collapsed]="isCollapsed()">
    <div class="units-list">
      <mat-tab-group mat-stretch-tabs="false" [selectedIndex]="selectedIndex" (selectedTabChange)="onTabChange($event)">
        @for (unit of filteredUnits(); track unit; let i = $index) {
        <mat-tab [label]="unit.name">
          <ng-template matTabContent>
            <div class="tab-content">
              @for(question of filteredQuestions(); track question; let i = $index){
              <div class="tab-main-content">
                <div class="question">
                  <h4 class="question">{{i+1}}) {{ question.name }}</h4>
                  <div class="options-container">
                    <button mat-icon-button aria-label="YouTube"
                      (click)="openYoutubeVideo('https://www.youtube.com/watch?v=47MGfydWVvA')">
                      <mat-icon matTooltip="Watch On YouTube">ondemand_video</mat-icon>
                    </button>

                    <button mat-icon-button aria-label="Cheat Note">
                      <mat-icon matTooltip="Cheat Notes">note</mat-icon>
                    </button>

                    @if (isSimpleAnswer(question.questionId)) {
                    <button mat-icon-button aria-label="Original Answer"
                      (click)="toggleAnswerMode(question.questionId)">
                      <mat-icon matTooltip="Original Version">restart_alt</mat-icon>
                    </button>
                    }
                    @else {
                    <button mat-icon-button aria-label="Simple Answer" (click)="toggleAnswerMode(question.questionId)">
                      <mat-icon matTooltip="Simple Version">lightbulb</mat-icon>
                    </button>
                    }
                  </div>
                </div>
                <app-answer [questionId]="question.questionId" [isSimple]="isSimpleAnswer(question.questionId)">
                </app-answer>
              </div>
              }
            </div>
          </ng-template>
        </mat-tab>
        }
      </mat-tab-group>
    </div>
  </div>
</div>